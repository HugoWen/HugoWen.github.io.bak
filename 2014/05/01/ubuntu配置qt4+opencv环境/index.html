<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Ubuntu配置qt4+opencv环境 | Hugo&#39;s blog</title>
  <meta name="author" content="Hugo Wen">
  
  <meta name="description" content="热爱开源，崇尚自由">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Ubuntu配置qt4+opencv环境"/>
  <meta property="og:site_name" content="Hugo&#39;s blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Hugo&#39;s blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
  <meta name="baidu-site-verification" content="mzX1orDNMC" />
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Hugo&#39;s blog</a></h1>
  <h2><a href="/">热爱开源，崇尚自由</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/archives">存档</a></li>
    
      <li><a href="/about">关于</a></li>
    
      <li><a href="/todolist">ToDo</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-05-01T08:00:04.000Z"><a href="/2014/05/01/ubuntu配置qt4+opencv环境/">5月 1 2014</a></time>
      
      
  
    <h1 class="title">Ubuntu配置qt4+opencv环境</h1>
  

    </header>
    <div class="entry">
      
        <h2 id="配置系统环境"><strong>配置系统环境</strong></h2>
<p><em>安装g++：</em></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="built_in">sudo</span> apt-get install g++
<span class="built_in">sudo</span> apt-get install g++ automake
</pre></td></tr></table></figure>

<p><a id="more"></a><br><em>更新和升级系统：</em></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="built_in">sudo</span> apt-get update
<span class="built_in">sudo</span> apt-get upgrade
</pre></td></tr></table></figure>

<h2 id="配置qt4环境"><strong>配置qt4环境</strong></h2>
<p><em>安装qt4相关：</em></p>
<p><code>sudo apt-get install libqt4-dev qt4-dev-tools qt4-designer qt4-doc qt4-demos</code></p>
<p><em>安装qt4 creator：</em></p>
<p>下载地址： <a href="http://qt-project.org/downloads/" target="_blank">http://qt-project.org/downloads/</a><br>下载后是run文件，修改权限并运行，然后图形化界面安装</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>sudo chmod <span class="number">777</span> qt<span class="attribute">-creator</span><span class="attribute">-opensource</span><span class="attribute">-linux</span><span class="attribute">-x86_64</span><span class="subst">-</span><span class="number">3.0</span><span class="number">.1</span><span class="built_in">.</span>run
</pre></td></tr></table></figure>

<h2 id="配置opencv环境"><strong>配置opencv环境</strong></h2>
<p><em>安装必要的依赖环境：</em></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>sudo apt<span class="attribute">-get</span> install build<span class="attribute">-essential</span> libgtk2<span class="number">.0</span><span class="attribute">-dev</span> libjpeg<span class="attribute">-dev</span> libtiff4<span class="attribute">-dev</span> libjasper<span class="attribute">-dev</span> libopenexr<span class="attribute">-dev</span> cmake python<span class="attribute">-dev</span> python<span class="attribute">-numpy</span> python<span class="attribute">-tk</span> libtbb<span class="attribute">-dev</span> libeigen2<span class="attribute">-dev</span> yasm libfaac<span class="attribute">-dev</span> libopencore<span class="attribute">-amrnb</span><span class="attribute">-dev</span> libopencore<span class="attribute">-amrwb</span><span class="attribute">-dev</span> libtheora<span class="attribute">-dev</span> libvorbis<span class="attribute">-dev</span> libxvidcore<span class="attribute">-dev</span> libx264<span class="attribute">-dev</span> libqt4<span class="attribute">-dev</span> libqt4<span class="attribute">-opengl</span><span class="attribute">-dev</span> sphinx<span class="attribute">-common</span> texlive<span class="attribute">-latex</span><span class="attribute">-extra</span> libv4l<span class="attribute">-dev</span> libdc1394<span class="subst">-</span><span class="number">22</span><span class="attribute">-dev</span> libavcodec<span class="attribute">-dev</span> libavformat<span class="attribute">-dev</span> libswscale<span class="attribute">-dev</span>
</pre></td></tr></table></figure>

<p><em>下载、编译、运行opencv2.4.1（不建议2.4.8，我配置2.4.8后出现问题）</em></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre>wget http:<span class="comment">//downloads.sourceforge.net/project/opencvlibrary/opencv-unix/2.4.1/OpenCV-2.4.1.tar.bz2</span>
tar jxvf OpenCV<span class="subst">-</span><span class="number">2.4</span><span class="number">.1</span><span class="built_in">.</span>tar<span class="built_in">.</span>bz2
cd OpenCV<span class="subst">-</span><span class="number">2.4</span><span class="number">.1</span>
mkdir build
cd build
cmake <span class="attribute">-D</span> WITH_TBB<span class="subst">=</span><span class="keyword">ON</span> <span class="attribute">-D</span> BUILD_NEW_PYTHON_SUPPORT<span class="subst">=</span><span class="keyword">ON</span> <span class="attribute">-D</span> WITH_V4L<span class="subst">=</span><span class="keyword">ON</span> <span class="attribute">-D</span> INSTALL_C_EXAMPLES<span class="subst">=</span><span class="keyword">ON</span> <span class="attribute">-D</span> INSTALL_PYTHON_EXAMPLES<span class="subst">=</span><span class="keyword">ON</span> <span class="attribute">-D</span> BUILD_EXAMPLES<span class="subst">=</span><span class="keyword">ON</span> <span class="attribute">-D</span> WITH_QT<span class="subst">=</span><span class="keyword">ON</span> <span class="attribute">-D</span> WITH_OPENGL<span class="subst">=</span><span class="keyword">ON</span> <span class="built_in">..</span>
make
sudo make install
</pre></td></tr></table></figure>

<p><em>编辑系统环境变量：</em></p>
<p><code>sudo vim /etc/ld.so.conf.d/opencv.conf</code></p>
<p><em>添加opencv库所在路径：</em></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>/usr/local/lib
<span class="built_in">sudo</span> ldconfig
<span class="built_in">sudo</span> vim /etc/bash.bashrc
</pre></td></tr></table></figure>

<p><em>在末尾添加：</em></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="constant">PKG_CONFIG_PATH</span>=<span class="variable">$PKG_CONFIG_PATH</span><span class="symbol">:/usr/local/lib/pkgconfig</span>  
export <span class="constant">PKG_CONFIG_PATH</span>
</pre></td></tr></table></figure>

<p>至此，配置成功。</p>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/linux/">linux</a>, <a href="/categories/linux/qt/">qt</a>, <a href="/categories/linux/qt/opencv/">opencv</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/qt4/">qt4</a>, <a href="/tags/opencv/">opencv</a>, <a href="/tags/ubuntu/">ubuntu</a>
  </div>

        <!-- 
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>
 -->
        <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone"></a><a href="#" class="bds_tsina" data-cmd="tsina"></a><a href="#" class="bds_tqq" data-cmd="tqq"></a><a href="#" class="bds_renren" data-cmd="renren"></a><a href="#" class="bds_weixin" data-cmd="weixin"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdPic":"","bdStyle":"0","bdSize":"16"},"share":{},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["qzone","tsina","tqq","renren","weixin"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <!--<h1 class="title">留言</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="http://hugowen.com/2014/05/01/ubuntu配置qt4+opencv环境/" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
   -->
  <!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="/2014/05/01/ubuntu配置qt4+opencv环境/" data-title="Ubuntu配置qt4+opencv环境" data-url="http://hugowen.com/2014/05/01/ubuntu配置qt4+opencv环境/"></div>
  <!-- <div class="ds-thread" data-thread-key="/2014/05/01/ubuntu配置qt4+opencv环境/" data-title="Ubuntu配置qt4+opencv环境" data-url="hugowen.com"></div> -->
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"hugowen"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->

</section>

</div></div>
    <aside id="sidebar" class="alignright">
  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/linux/">linux</a><small>2</small></li>
  
    <li><a href="/categories/linux/qt/opencv/">opencv</a><small>1</small></li>
  
    <li><a href="/categories/php/">php</a><small>1</small></li>
  
    <li><a href="/categories/linux/qt/">qt</a><small>1</small></li>
  
    <li><a href="/categories/软件技术/">软件技术</a><small>2</small></li>
  
    <li><a href="/categories/随笔/">随笔</a><small>1</small></li>
  
  </ul>
</div>


  <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=0&uid=2707088101&verifier=afc52e13&dpc=1"></iframe>

  <script type="text/javascript" src="http://www.douban.com/service/badge/66678382/?selection=latest&amp;picsize=small&amp;show=collection&amp;n=16&amp;cat=drama%7Cmovie%7Cbook%7Cmusic&amp;columns=4"></script>
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2014 Hugo Wen
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Ff620f4e3bc93d2f83d189c53ee94930f' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1000406779'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1000406779%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>

</body>
</html>

<a href="https://github.com/HugoWen"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/c6286ade715e9bea433b4705870de482a654f78a/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_white_ffffff.png"></a>